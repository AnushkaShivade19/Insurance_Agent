{% extends 'base.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/claims.css' %}"> <link rel="stylesheet" href="{% static 'css/claim_detail.css' %}"> <div class="claim-card">
    
    <div class="claim-header">
        <h2>Claim <span id="claimId">#{{ claim.id }}</span></h2>
        <span class="status-badge status-{{ claim.status }}">
            {{ claim.get_status_display }}
        </span>
    </div>

    <div class="form-group">
        <label>Policy Details</label>
        <p style="font-size: 1.1rem; color: #333; margin: 0;">
            <strong>{{ claim.policy.product.name }}</strong>
        </p>
        <p style="color: #666; font-size: 0.9rem; margin-top: 5px;">
            Policy No: {{ claim.policy.policy_number }}
        </p>
    </div>

    <div class="form-group">
        <label>Incident Description</label>
        <div class="desc-box">
            "{{ claim.description }}"
        </div>
    </div>

    {% if claim.evidence_image %}
    <div class="form-group">
        <label>Uploaded Evidence</label>
        <img src="{{ claim.evidence_image.url }}" alt="Evidence Photo" class="evidence-img">
    </div>
    {% endif %}

    <div class="guidance-section">
        <h3 class="guidance-title">Tracking & Next Steps</h3>
        
        {% if guidance_steps %}
            {% for step in guidance_steps %}
            <div class="step-item">
                <div class="step-number">{{ step.step_number }}</div>
                <div class="step-content">
                    <h4>Step {{ step.step_number }}</h4>
                    <p>{{ step.description }}</p>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p style="color:#666; font-style: italic;">
                Your claim has been filed. Our team is currently reviewing your documents.
            </p>
        {% endif %}
    </div>

    <div class="action-row">
        <button onclick="printReceipt()" class="btn-secondary" style="border:none; cursor:pointer;">
            üñ®Ô∏è Print Receipt
        </button>
        
        <a href="{% url 'dashboard' %}" class="cta-button" style="width: auto; margin-top:0; text-decoration:none;">
            Dashboard
        </a>
    </div>
</div>

<script src="{% static 'js/claim_detail.js' %}"></script>

{% endblock %}