{% extends 'base.html' %}
{% load static %}

{% block title %}BimaSakhi - Your Rural Insurance Partner{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
{% endblock %}

{% block content %}

    <section class="hero">
        <div class="container hero">
            <div class="hero-text">
                <h1>Financial Security,<br><span class="highlight">Rooted in Trust.</span></h1>
                <p>Your personal guide to understanding and choosing the right insurance. Simple advice, in your own language, for a secure future.</p>
                <a href="{% url 'chat' %}" class="cta-button" style="font-size: 1.2rem;">Start Your Conversation</a>
            </div>
            <div class="hero-image">
                <img src="{% static 'momkid.jpg' %}" alt="A happy rural Indian mother and child">
            </div>
        </div>
    </section>

    <section class="section how-it-works">
        <div class="container">
            <h2 class="section-title">How BimaSakhi Empowers You</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-icon-wrapper"><i data-feather="message-circle"></i></div>
                    <h3>Personalized Chatbot</h3>
                    <p>Ask questions, understand terms, and get guided suggestions in your preferred regional language.</p>
                </div>
                <div class="step">
                    <div class="step-icon-wrapper"><i data-feather="award"></i></div>
                    <h3>Tailored Recommendations</h3>
                    <p>Complete a simple survey to receive insurance product suggestions perfectly matched to your needs.</p>
                </div>
                <div class="step">
                    <div class="step-icon-wrapper"><i data-feather="users"></i></div>
                    <h3>Local Agent Connect</h3>
                    <p>Find and connect with trusted, verified insurance agents right in your local community.</p>
                </div>
                <div class="step">
                    <div class="step-icon-wrapper"><i data-feather="shield"></i></div>
                    <h3>Easy Policy Management</h3>
                    <p>Track your active policies, monitor claims, and stay informed about renewals, all in one place.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section class="section product-preview" style="background-color: var(--bg-color);">
        <div class="container">
            <h2 class="section-title">Insurance Made Simple</h2>
            <div class="product-grid">
                {% if products %}
                    {% for product in products %}
                    <a href="{% url 'products' %}" class="product-card">
                        <div class="product-card-header">
                            <h3>{{ product.name }}</h3>
                            <p>{{ product.get_product_type_display }}</p>
                        </div>
                        <div class="product-card-body">
                            <p>{{ product.description|truncatewords:20 }}</p>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <p style="text-align: center; grid-column: 1/-1;">Our insurance products will be listed here soon!</p>
                {% endif %}
            </div>
            <div style="text-align: center; margin-top: 3rem;">
                <a href="{% url 'products' %}" class="cta-button" style="background-color: var(--secondary-color);">See All Products</a>
            </div>
        </div>
    </section>

    <section class="section stories">
        <div class="container">
            <h2 class="section-title">Stories of Trust & Security</h2>
            <div class="story-grid">
                <div class="story-card">
                    <img src="{% static 'rural.jpg' %}" alt="Confident farmer">
                    <div class="story-content">
                        <blockquote>"After the drought, the crop insurance I chose with BimaSakhi's help was our only saving grace."</blockquote>
                        <cite>— Rajendra Singh, Farmer, Rajasthan</cite>
                    </div>
                </div>
                <div class="story-card">
                    <img src="{% static 'rural-insurance.jpg' %}" alt="Shop owner">
                    <div class="story-content">
                        <blockquote>"My husband's health policy was confusing, but the chatbot explained everything in Marathi."</blockquote>
                        <cite>— Priya Patil, Shop Owner, Maharashtra</cite>
                    </div>
                </div>
                <div class="story-card">
                    <img src="{% static 'download.jpg' %}" alt="Young farmer">
                    <div class="story-content">
                        <blockquote>"Getting my tractor insured was easy. I just talked to the bot, found a local agent, and got it done."</blockquote>
                        <cite>— Karthik Yadav, Youth Farmer, Punjab</cite>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% if article %}
    <section class="section">
        <div class="container">
            <h2 class="section-title">From Our Knowledge Hub</h2>
            <div class="featured-article">
                <div class="article-image">
                    {% if article.featured_image %}
                        <img src="{{ article.featured_image.url }}" alt="{{ article.title }}">
                    {% else %}
                        <div style="width:100%; height:300px; background:#e2e8f0; display:flex; align-items:center; justify-content:center; border-radius:15px; border:2px dashed #cbd5e1;">
                            <span style="color:#64748b; font-weight:600;">No Image Available</span>
                        </div>
                    {% endif %}
                </div>
                <div class="article-text">
                    <h2>{{ article.title }}</h2>
                    <p>{{ article.content|truncatewords:30 }}</p>
                    <a href="{% url 'knowledge_hub' %}" class="cta-button" style="background-color: var(--secondary-color);">Read More Articles</a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <section class="section final-cta">
        <div class="container">
            <h2>Ready to Build a Secure Future for Your Family?</h2>
            <a href="{% url 'chat' %}" class="cta-button" style="background-color: var(--accent-color); color: var(--secondary-color) !important;">Talk to Your Sakhi Now</a>
        </div>
    </section>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/homepage.js' %}"></script>
{% endblock %}